/*! lie 1.1.0 2013-09-18*/
/*! (c)2013 Ruben Verborgh & Calvin Metcalf @license MIT https://github.com/calvinmetcalf/lie*/!function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];return g.exports||(g.exports={},g.client=g.component=!0,g.call(this,g.exports,a.relative(e),g)),g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},a.register("lie/lie.js",function(a,b,c){function Deferred(){function Promise(){this.then=function(b,c){return a(b,c)}}var a=function(c,g,i){var j;if(c!==a)return j=d(),a.queue.push({deferred:j,resolve:c,reject:g}),j.promise;for(var k,l,m,n=g?"resolve":"reject",o=0,p=a.queue.length;p>o;o++)k=a.queue[o],l=k.deferred,m=k[n],typeof m!==h?l[n](i):f(m,i,l);a=e(b,i,g)},b=new Promise;this.promise=b,a.queue=[],this.resolve=function(b){a.queue&&a(a,!0,b)},this.fulfill=this.resolve,this.reject=function(b){a.queue&&a(a,!1,b)}}function d(){return new Deferred}function e(a,b,c){return function(e,g){var i,j=c?e:g;return typeof j!==h?a:(f(j,b,i=d()),i.promise)}}function f(a,b,c){g(function(){var d;try{d=a(b),d&&typeof d.then===h?d.then(c.resolve,c.reject):c.resolve(d)}catch(e){c.reject(e)}})}var g=b("./nextTick"),h="function";d.resolve=function(a){var b={};return b.then=e(b,a,!0),b},d.reject=function(a){var b={};return b.then=e(b,a,!1),b},d.all=function(a){var b=d(),c=a.length,e=0,f=[],g=function(a){return function(d){f[a]=d,e++,e===c&&b.resolve(f)}};return a.forEach(function(a,c){a.then(g(c),function(a){b.reject(a)})}),b.promise},d.immediate=g,c.exports=d}),a.register("lie/nextTick.js",function(a,b,c){function d(a){1===h.push(a)&&f(e)}function e(){for(var a,b=0;a=h[b++];)a();h=[]}var f;if("function"==typeof setImmediate)f=setImmediate.bind(global);else if("undefined"!=typeof MessageChannel){var g=new MessageChannel;g.port1.onmessage=e,f=function(){g.port2.postMessage(0)}}else f="object"==typeof process&&process.nextTick?process.nextTick:function(a){setTimeout(a,0)};var h=[];c.exports=d}),a.alias("lie/lie.js","lie/index.js"),"object"==typeof exports?module.exports=a("lie"):"function"==typeof define&&define.amd?define(function(){return a("lie")}):this.deferred=a("lie")}();